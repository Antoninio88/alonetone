<div id="admin_columns">
  <div class="admin_column_left box">
    <h2>Admin</h2>
    <%= render partial: 'admin/navigation' %>
  </div>
  <div class="admin_column_right">

    <div class="mini_paginator top_paginator">
      <%== pagy_nav @pagy %>
    </div>

    <div class="admin_column_right_inner box">

      <header class="admin_comments_header">
        <div class="date_column">Date</div>
        <div class="user_column">User</div>
        <div class="text_column">Text</div>
      </header>

      <div class="admin_comment_rows">
        <% @comments.each do |comment| %>
            <div data-controller="admin--comment" data-admin--comment-spam="<%= comment.is_spam? %>" data-admin--comment-deleted="<%= comment.soft_deleted? %>" data-admin--comment-user-deleted="<%= comment.user.soft_deleted? %>">
              <div class="date_column"><%= comment.created_at.strftime("%b %d") %>, <%= comment.id %></div>
              <div class="user_column">
                <div class="avatar">
                  <%= user_image(@user, variant: :original) %>
                </div>
                <div>
                  <div>
                    <% if comment.commenter %>
                      <%= link_to "Comment By: #{comment&.commenter&.login}", admin_possibly_deleted_user_path(comment.commenter.login), { filter_by: {commenter_id: comment.commenter_id } } %>
                    <% else %>
                      <%= "Comment By: #{comment&.commenter&.login}" %>
                    <% end %>
                  </div>
                  <div><%= comment&.commenter&.email %></div>
                  <div><%= link_to "#{comment.remote_ip}", { filter_by: {commenter_id: comment.commenter_id } } %></div>
                </div>
              </div>
              <div class="text_column"><%= truncate(comment.body, length: 80) %></div>
              <div class="button_column">
                <div><%= button_to "Mark As Spam", spam_admin_comment_path(comment), method: :put, remote: true, data: { target: 'admin--comment.spamButton', action: 'click->admin--comment#markAsSpam' } %></div>
                <div><%= button_to "Restore", unspam_admin_comment_path(comment), data: { target: 'admin--comment.restoreButton', action: 'click->admin--comment#markAsRestored' }, method: :put, remote: true %></div>
              </div>
            </div>
        <% end %>
      </div>

    </div>

    <div class="mini_paginator bottom_paginator">
      <%== pagy_nav @pagy %>
    </div>

  </div>
</div>