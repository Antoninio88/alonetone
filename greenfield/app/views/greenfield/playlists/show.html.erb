<div class="playlist">
  <%= image_tag @playlist.alonetone_playlist.cover(:album) %>
    <h1> <%= @playlist.alonetone_playlist.title %>
    </h1>
    <h2><span class="by">by</span> <%= @post.asset.user.display_name %></h2>  
    <ul>
  <% @playlist.tracks.each do |track| %>
    <li data-sound-id="<%= [track.asset.user.login, track.asset.permalink].join('/') %>">
      
    <!-- Play button automagically plays AND changes to relevant track details  -->
    <%= link_to user_playlist_position_path(@playlist.user, @playlist, track.asset), remote: true, class: 'play-button' do %>
      <i class="fa fa-play"></i>
    <% end %>
    
    <!-- Track title just switches track details-->
    <%= link_to user_playlist_position_path(@playlist.user, @playlist, track.asset), remote: true do %>
      <span class="track<%= ' active' if track.asset == @playlist_position %>">
        <%= "%02d" % track.position %>. <%= track.name %>
      </span>
    <% end %>
    </li>
  <% end %>
  </ul>

  <% if @playlist.downloads.present? %>
    <hr size="1" />
    <ul>
      <% @playlist.downloads.each do |download| %>
        <li><%= link_to "Download #{download.title}", download.url %></li>
      <% end %>
    </ul>
  <% end %>
</div>

<div class="track-content">
  <h1><%= @post.asset.name %></h1>

  <%= player(@post.asset) %>

  <div class="post_content">
    <%= markdown(@post.body, post: @post) %>
  </div>

</div>
